<h1>ðŸ“Š Live Trade Scanner Dashboard</h1>
<p>Total Signals: {{ tradeSignals.length }}</p>

<h2>ðŸ”¥ Trade Signals</h2>
<table *ngIf="tradeSignals.length > 0" id="signal-table">
  <tr>
    <th>Stock</th>
    <th>Time</th>
    <th>Age</th>
    <th>Pattern</th>
    <th>Direction</th>
    <th>Entry</th>
    <th>SL</th>
    <th>Target1</th>
    <th>Target2</th>
    <th>Qty</th>
    <th>ATR</th>
    <th>Confidence</th>
    <th>Plan</th>
    <th>AI Explanation</th>
    <th>AI Review</th>
    <th>AI Advice</th>
  </tr>
  <tr *ngFor="let s of tradeSignals">
    <td>{{ s.stockName }}</td>
    <td>{{ s.dateTime }}</td>
    <td>{{ getSignalAge(s.dateTime) }}</td>
    <td>{{ s.pattern }}</td>
    <td [style.color]="s.direction === 'Long' ? 'green' : 'red'">
      {{ s.direction }}
    </td>
    <td>{{ s.entry }}</td>
    <td>{{ s.stopLoss }}</td>
    <td>{{ s.target1 }}</td>
    <td>{{ s.target2 }}</td>
    <td>{{ s.qty }}</td>
    <td>{{ s.atr }}</td>
    <td>{{ s.confidence }}</td>
    <td>{{ s.ai?.plan }}</td>
    <td>{{ s.ai?.explanation }}</td>
    <td>
      <em>{{ s.ai?.confidenceReview }}</em>
    </td>
    <td>{{ s.ai?.advisory }}</td>
    <!-- 
    <td><div [innerHTML]="s.ai?.plan | markdown"></div></td>
    <td><div [innerHTML]="s.ai?.explanation | markdown"></div></td>
    <td><div [innerHTML]="s.ai?.confidenceReview | markdown"></div></td>
    <td><div [innerHTML]="s.ai?.advisory | markdown"></div></td> -->
  </tr>
</table>

<h2>ðŸ“™ Signal History</h2>
<table *ngIf="signalHistoryEntries.length > 0">
  <tr>
    <th>Stock</th>
    <th>Pattern</th>
    <th>Direction</th>
    <th>Time</th>
  </tr>
  <tr *ngFor="let entry of signalHistoryEntries">
    <td>{{ entry.stock }}</td>
    <td>{{ entry.pattern }}</td>
    <td [style.color]="entry.direction === 'Long' ? 'green' : 'red'">
      {{ entry.direction }}
    </td>
    <td>{{ entry.timestamp | date : "short" }}</td>
  </tr>
</table>
